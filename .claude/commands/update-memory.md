---
name: update-memory
description: 今回の開発で学んだことをCLAUDE.mdに追記
model: haiku
---

今回の開発セッションで学んだことをCLAUDE.mdに追記してください。

## 追記対象
1. 発生した問題と解決策
2. 避けるべきパターン
3. プロジェクト特有の癖
4. ライブラリのバグや制限事項
5. 次回以降に役立つ知見

## 追記先
CLAUDE.md の「## 過去の学習（自己修正で蓄積）」セクション

## フォーマット
- [日付] 内容
- 例: [2026-01-20] Supabaseの.single()は結果が0件でもエラーになる。.maybeSingle()を使う

## 肥大化対策（重要）
追記前に現在の学習項目数を確認し、**20件を超えている場合**：
1. 重複している項目を統合
2. 古くて適用されなくなった項目を削除
3. 類似の項目をカテゴリごとにまとめる

## Human Review（重要）
**追記を実行する前に**、必ず以下の形式で人間に確認を求めること：

```
以下の学習内容を CLAUDE.md に追記します：

- [日付] [追記内容1]
- [日付] [追記内容2]

追記してよろしいですか？ (Y/n)
```

→ 人間が「Y」または承認の意思を示した場合のみ追記を実行する。
→ 誤った教訓（Hallucinated Best Practice）の定着を防ぐため。

追記後、何を学習したか（または整理したか）簡潔に報告してください。
